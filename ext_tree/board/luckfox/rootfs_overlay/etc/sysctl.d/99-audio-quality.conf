# RV1106 Audio Quality Optimizations
# Settings for maximum audio fidelity and minimal jitter

# === Real-time Audio Performance ===
# Reduce scheduling latency for audio processes
kernel.sched_rt_runtime_us = 950000
kernel.sched_rt_period_us = 1000000
kernel.sched_rr_timeslice_ms = 5

# === Timer & Clock Precision ===
# High-resolution timers for precise audio timing
kernel.timer_migration = 0
kernel.nmi_watchdog = 0

# === Memory Management for Audio ===
# Lock audio buffers in memory (no swapping during playback)
vm.swappiness = 1
vm.min_free_kbytes = 32768
vm.vfs_cache_pressure = 10

# Reduce memory allocation pressure
vm.dirty_background_ratio = 2
vm.dirty_ratio = 5
vm.dirty_expire_centisecs = 500
vm.dirty_writeback_centisecs = 100

# === Network Buffers for Streaming ===
# Larger buffers for smooth network audio streaming
net.core.rmem_default = 524288
net.core.rmem_max = 33554432
net.core.wmem_default = 524288
net.core.wmem_max = 33554432
net.core.netdev_max_backlog = 10000

# === Filesystem Performance ===
# Faster file access for large audio files
fs.file-max = 131072
fs.nr_open = 1048576

# === Interrupt Handling ===
# Dedicated interrupt handling for audio
kernel.softirq_time_limit_us = 2000
kernel.ched_latency_ns = 6000000